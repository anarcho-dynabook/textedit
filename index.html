<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>textedit</title>
        <style>
            body {
                margin: 0;
                padding: 0;
                background: #f9f9f9;
                font-family: "Segoe UI", Arial, sans-serif;
                overflow-y: hidden;
            }
            .container {
                max-width: 100%;
                min-height: 100%;
                background: #fff;
                padding: 40px 36px 30px 36px;
                display: flex;
                flex-direction: column;
                gap: 24px;
            }
            textarea {
                font-family: Arial, Helvetica, sans-serif;
                width: 100%;
                min-height: 100%;
                resize: vertical;
                font-size: 1.2em;
                line-height: 1.6;
                padding: 20px;
                border-radius: 6px;
                border: 1px solid #e6e6e6;
                box-sizing: border-box;
                outline: none;
                background: #fafbfc;
                color: #222;
                transition: border-color 0.2s;
            }
            .download-section {
                margin: 0;
                display: flex;
                align-items: center;
                gap: 12px;
                justify-content: flex-end;
            }
            input[type="text"] {
                font-size: 1em;
                padding: 7px 12px;
                border-radius: 4px;
                border: 1px solid #ddd;
                outline: none;
                width: 170px;
                transition: border-color 0.2s;
            }
            input[type="text"]:focus {
                border-color: #4e9aff;
            }
            button {
                padding: 8px 18px;
                font-size: 1em;
                border-radius: 4px;
                border: none;
                background: #4e9aff;
                color: #fff;
                cursor: pointer;
                font-weight: 500;
                transition: background 0.2s;
            }
            button:hover {
                background: #2c7be5;
            }
            @media (max-width: 800px) {
                .container {
                    max-width: 98vw;
                    margin: 20px 1vw;
                    padding: 18px 6vw;
                }
                textarea {
                    min-height: 240px;
                }
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div class="download-section">
                <input
                    id="filename"
                    type="text"
                    value="note.txt"
                    autocomplete="off"
                    spellcheck="false"
                    placeholder="Filename for download"
                />
                <button onclick="downloadText()">Download</button>
            </div>
            <textarea
                id="editor"
                spellcheck="false"
                placeholder="Start writing here..."
            ></textarea>
        </div>
        <script>
            function downloadText() {
                const text = document.getElementById("editor").value;
                let filename = document.getElementById("filename").value.trim();

                if (!filename) filename = "note.txt";
                if (!filename.match(/\.txt$/i)) filename += ".txt";
                const blob = new Blob([text], { type: "text/plain" });

                const link = document.createElement("a");
                link.href = URL.createObjectURL(blob);
                link.download = filename;
                link.click();
            }
            function fixEditorHeight() {
                let height = 0;
                let edit = document.getElementById("editor");
                while (document.body.scrollHeight < window.innerHeight) {
                    edit.style.height = height++ + "px";
                }
                edit.style.height = height-- + "px";
            }

            fixEditorHeight();
            window.addEventListener("resize", fixEditorHeight);
        </script>
    </body>
</html>
